**chroma key 

✔✔YUV,YCbCr/YPbPr what is a chroma sampling? 

Chroma subsampling YCbCr 4:2:0
(크로마:색차+ 서브샘플링: 전체 데이터의 샘플링이 아닌 데이터 일부를 추려서 샘플링) 
>>> Y(LUMA) UV(크로마:색차)로 구성된 YUV 컬러 모델은 Y는 그대로 두고 크로마정보를 서브샘플링하여 전체 영상 데이터를 줄여주는 기술 (Y값도 감마 보정은 이루어짐) 

✔RGB Color Model 
현재 모든 디지털 디스플레이는 어떤 중간 과정을 거치던 최종본은 RGB 컬러 모델로 영상 구현 
>영상을 4:2:0 으로 압축해도 최종본은 RGB로 다시 변환 
컴퓨터 모니터, 디지털 TV, 블루레이, PC, MAC, 디지털 캠코더, Win 10등 대부분 디지털 영상 관련 기기나 소프트 웨어는 8bit RGB시스템을 기본으로 함 
>(만약 10비트 12비트 디스플레이 기기를 구매했더라도 최종컬러는 8비트일 확률이 높다. 10비트로 제작된 영상 소스를 10비트로 처리 가능한 디스플레이 기기에서 봐야하기에)

✔8bit RGB 

![KakaoTalk_20210927_014725615](https://user-images.githubusercontent.com/90597861/134845392-bf72398d-8f52-4e3e-95f1-53ec49683a1c.jpg)

Red,Green,Blue 빛의 3요소 컬러별로 8비트(2의 8승)-256단계의 명암 표현 가능 시스템 
8bit RGB 즉, 24bit 컬러 시스템은 256의 3승으로 천육백만(16,777,216) 컬러 표현 가능 
>RGB(0.0.0)= Black, RGB(255.255.255)= White 
>추가 Win 10에서의 32비트=RGB 8비트 3배 + 알파값 8비트 
>맥OS의 2015년 이후(알캐피탄 이후) RGB 10 지원, 하지만 전체 컬러시스템이 아닌 특정앱(사진, 미리보기등)에서만 지원 

✔why we use YUV?

RGB라는 직관적인 컬러 모델의 존재에도 YUV를 사용하는 2가지 이유 
YUV는 흑백TV에서 컬러TV 변환하는 과정에서 생김 (컨텐츠의 하위 호환성과 더불어 데이터 저장의 효율성 때문에 사용 
>> 여기서 말하는 데이터 저장의 효율성이 크로마 샘플링 
흑백TV시절 명암을 표시하는 휘도인 Y값만 존재, 이후 컬러TV방송 시대 도래 이후 UV값을 더해 컬러영상 
시간이 흘러 아날로그 YUV는 YCrBr이라는 디지털 인코딩 시스템으로 발전 (이와 구분하여 아날로그 인코딩 시스템은 YPbPr로 표기 

![KakaoTalk_20210927_020753663](https://user-images.githubusercontent.com/90597861/134846445-f3cc32a7-d669-48e0-b0d8-5e702da90e08.jpg)

✔where is green? 

위에서 UV에 대해 컬러라는 용어 대신 색차라는 용어를 사용 
색차는 컬러가 아닌 휘도Y값이 더해져야 하는 값 >> 일종의 좌표값이라고 생각해 (Cb= blue-yellow 축상으로부터의 편차, Cr= red-cyan 축상으로 부터의 편차) 

![KakaoTalk_20210927_022952543](https://user-images.githubusercontent.com/90597861/134846646-550297c9-bb1f-4fe3-96c0-f84944e50fcb.jpg)

✔Chroma Subsampling의 원리 

Y값은 인간의 눈에 민감하여 데이터 축소가 힘듬 
대신 CbCr값을 변환해도 인간의 눈은 거의 인식 불가 

4:4:4에서의 각 숫자의 의미 

샘플링 단위는 4열 2행의 총 8개의 픽셀 

![KakaoTalk_20210927_024755900](https://user-images.githubusercontent.com/90597861/134849164-279bf63b-bd65-403d-a5e5-eb2ab76d1264.jpg)

4:4:4에서 
맨앞의 숫자 4는 고정값- 가로 4개의 픽셀이라는 의미 
두번쨰 4는 첫번쨰 행의 숫자, 만약 2가 되면 파란색과 진보라는 무시. 노란색과 연보라만 샘플링 
세번째 4는 두번째 행의 숫자, 같은 원리 
만약 0인 된다면 샘플링하지 않는다는 의미 

예시) 4:2:2

![KakaoTalk_20210927_024756995](https://user-images.githubusercontent.com/90597861/134849498-5f83423c-664c-45dc-8644-4528d69c4c2f.jpg)

4:2:0

![KakaoTalk_20210927_024757083](https://user-images.githubusercontent.com/90597861/134849516-3da1b07f-f8dd-4fb8-8b81-9ef19e90a886.jpg)

YCbCr4:4:4 에서 YCbCr 4:2:0

![KakaoTalk_20210927_024924282](https://user-images.githubusercontent.com/90597861/134849575-d776ffff-3e70-4587-ae9d-4e5e434fba2f.jpg)

8개의 픽셀중 2개만 샘프링시 결과물이 너무 다르지 않은가? 
하지만 루마값이 더해진다면 인간의 눈은 크게 인식하지 못함 

![KakaoTalk_20210927_024755785](https://user-images.githubusercontent.com/90597861/134849720-818bc616-7263-4bda-a691-d97f6eac0f98.jpg)

또한 고해상도로 갈 수록 작은 단위의 변화는 눈을 구분하기 힘들어짐(동영상의 경우 더욱 힘들어짐
따라서 4:4:4는 무압축 데이터, 4:2:2, 4:2:0이 널리 사용됨 
YCbCr 4:2:2 
주로 편집 중간과정서 사용 최종본이 4:2:0이라도 편집과정서의 데이터 손실을 고려해 사용된다 
YCbCr 4:2:0 
원본손실은 있지만 폰트를 제외한 동영상이나 이미지에서의 품질저하를 인지하기 힘듬 
4:2:0은 매우 유용한 샘플링 기술 
기술이 계속 발전하여 저장 용량이 높아지고 전송 대역폭이 커지면 샘플링이 불필요해질까? 
>그 시기는 매우 더디다. 정답은 하위 호환성에 있다 
>새로운 기술은 적용에 있어 현실보다 하위호환성이 떨어진다면 소비자들은 가진 모든 영상 기기를 바꾸어야 하거나 그간의 영상을 보지 못하게 됨 

*CHROMA KEY 

크로마키는 두 개의 영상을 합성하는 기술. A와 B 이렇게 두 개의 영상이 있으면, B 영상으로부터 키가 되는 색을 설정하여 제거하거나 투명하게 만들어서 뒤의 A 영상이 비치게 할 수 있다. 이 기술은 또한 컬러 키, 색 분리 오버레이, 그린스크린, 블루스크린이라고도 일컬을 수 있다. 즉 크로마를 사용하는 이유는 배경과 원하는 피사체를 분리하기 위해서이다.(매트를 추출하기 위함)

크로마키를 반드시 파란색과 초록색만 사용할 수 있는 것은 아님. 영상 믹서 기기나 영상 편집 소프트웨어를 사용하여 직접 색을 고를 수도 있고, “스로틀 기능”을 이용하여 겹치는 부분의 모서리를 부드럽게 표현할 수 있음.

![avengers-green-screen](https://user-images.githubusercontent.com/90597861/146694409-bbc34151-ade4-4a56-8061-f019623be3b8.jpg)

오늘날 대부분의 영화가 그린스크린을 사용하는데 꼭 블록버스터급 SF영화에서만 사용되는것은 아니다. 일상을 그린 가족영화에서도 그린스크린은 사용될 수 있다. 

현대에 이르러서 대부분 녹색의 크로마키를 사용하는 이유는 인간의 피부 색조에서 가장 멀리 떨어진 색상이기 때문이라 일컬어 짐.(모든 단일 색상을 키로 뺄 수 있다) 

색상환을 보면 파란색과 녹색이 일반적으로 피부 톤이 있는 반대쪽에 위치하는 것을 알 수 있다.

![Blue-Screen-vs-Green-Screen-Color-Wheel](https://user-images.githubusercontent.com/90597861/146695946-80dd8aa3-0b62-4b14-890c-0cc13bf907f0.jpg)

필름에서 블루 스크린은 몇 가지 이유로 사용. 첫째, 필름의 파란색 채널은 입자가 가장 작기 때문에 가장자리를 따라 매트가 더 깨끗해지고 이미지 품질이 향상. 둘째, 청색광을 이용하여 흑백필름에 청색을 노출시키면 청색이 밝은 흰색으로 나타나며, 이를 광학프린터와 함께 사용하여 합성과정을 시작할 수 있다.

이후 영화가 디지털 후반 작업 프로세스로 전환되기 시작하면서 그린 스크린이 부상. (디지털 카메라의 인기가 높아졌다) 첫째, 대부분의 디지털 카메라는 빨간색이나 파란색에 비해 녹색 정보를 두 배 더 많이 캡처. (이는 녹색 채널이 휘도에도 사용되어 포스트 프로덕션에서 녹색을 키아웃하기 쉽게 만들기 때문) 녹색 스크린은 또한 더 많은 빛을 반사하기 때문에 블루 스크린보다 더 적은 빛을 필요로 한다. (조명이 덜 필요하다는 것은 사용 비용이 더 저렴하다는 것을 의미) 밝은 녹색은 의상과 옷장에서 흔하지 않은 색상이기도 하므로 포스트에서 문제가 덜 발생한다. 

따라서 오늘날 그린스크린이 대부분 사용되는 이유가 이에 있음. 

 앞서 언급했듯이 대부분의 디지털 카메라는 녹색 채널에서 더 많은 정보를 캡처. 결과적으로 노이즈 아티팩트가 적고 피사체 주변의 키가 더 깨끗해진다. 그린 스크린은 또한 조명을 덜 필요로 하므로 예산에 여유가 있는 경우에 적합. 녹색 화면에서 흘러나오는 유출은 녹색이 더 밝기 때문에 피사체를 주간 장면으로 쉽게 합성할 수 있습니다. 이렇게 하면 합성물이 더 자연스럽게 보입니다. 마지막으로 많은 디지털 키잉 효과와 도구가 기본적으로 녹색으로 키아웃되도록 설정되어 있다. 이렇게 하면 포스트 프로덕션 워크플로의 속도를 높일 수 있으므로 깨끗한 키를 위한 미세 조정이 덜 필요한다.
 
 그린 스크린의 가장 큰 단점은 색상 유출의 양이다. 녹색은 파란색보다 더 밝기 때문에 자연스럽게 더 많은 빛을 반사. 이 빛에는 녹색 색조가 있다. 이는 피사체에 더 많은 색상 번짐이 있음을 의미하며, 특히 머리카락, 메쉬와 같은 요소를 처리할 때 포스트 프로덕션에서 색상 스필을 제거하는 것이 까다로울 수 있음을 의미한다. 금속성 반사 또는 미세한 의상 세부 사항. 녹색 화면은 피사체를 야간이나 어두운 장면으로 합성하는 경우에도 이상적이지 않다. 다시 말하지만, 이는 녹색 화면에서 반사된 빛으로 인해 피사체가 부자연스럽게 밝게 나타나기 때문이다.
 
 블루 스크린의 주요 이점은 색상 번짐이 상당히 적다는 것. 파란색은 휘도 값이 낮기 때문에 빛이 많이 반사되지 않기 때문이다. 이것은 키잉이 완료된 후에도 그 디테일을 유지할 수 있기 때문에 디테일로을 필요로하는 피사체를 촬영해야 할 때 큰 도움이 된다. 같은 맥락에서 그린 스크린에서 금발 머리를 한 피사체를 핵심으로 삼는 것은 매우 어려울 수 있다. 크로마 키는 종종 머리카락을 너무 많이 잘라낸다. 금발 머리의 피사체는 블루 스크린에서 키잉하기가 훨씬 쉽다. 블루 스크린은 또한 피사체에 빛을 덜 반사하기 때문에 야간 합성에 더 잘 작동한다.

블루 스크린의 가장 큰 단점은 적절하게 노출되기 위해 그린 스크린보다 더 많은 빛이 필요하다는 것. 강력한 조명을 사용할 수 없거나 그런 종류의 조명을 공급하기에 충분한 예산이 없는 경우 문제가 될 수 있다. 블루 스크린의 또 다른 단점은 파란색이 의류와 의상에 훨씬 더 일반적이라는 것. 청바지나 파란색 비즈니스 정장과 같은 의류는 문제가 될 수 있으며 후반 작업에서 키를 지정하는 데 훨씬 더 많은 작업이 필요한다.


크로마키와 그린스크린 용어를 구분하자면 크로마키는 그린스크린과 함께 사용되며 색상 색조를 기반으로 두 개의 이미지를 레이어링하거나 합성하는 실제 기술. 
동시에 키잉은 비디오 편집 소프트웨어를 사용하여 포스트 프로덕션에서 그린 스크린 배경을 제거하는 프로세스. 

*그린스크린 촬영하기 

무반사 그린 스크린 소재를 사용하고, 디지 그린 색상으로 한다. 또한 블루스크린은 야간 촬영에서 유리하다. 

피사체를 그린 스크린에서 최소 6피트 이상 떨어트린다. 스크린에 맽히는 그림자를 예방할 수 있다. 

가능한 가장 높은 비트 전송률/가장 적은 압축 코덱으로 영화를 촬영한다. 10비트 색상은 8비트보다 우수. ProRes 442 및 444는 항상 좋은 선택. 해당 기능이 있다면 RAW가 훨씬 더 좋다.
(그린스크린에 있어 높은 비트뎁스를 이용하는것이 유리하다)

전경과 배경은 별도로 조명을 하고 배경의 조명은 그라데이션이 없고 깨끗하게 촬영한다. 

더 빠른 셔터 속도로 촬영.모션 블러가 줄어들고 깨끗한 키를 제공하는 데 도움. 후반 작업 중에 언제든지 보조 모션 블러를 다시 추가가능하니까. 

그린 스크린으로 촬영할 때는 미리 계획하고 최종 장면을 시각화하는 것이 중요. (컨셉 아트와 스토리보드 등) 주요 목표는 장면에 무엇이 실제이고 무엇이 아닌지를 결정 하는 것. 즉, 장면에 물리적으로 무엇이 포함될지, 후반 작업 중에 나중에 추가될지 결정하는것이 중요하다. 

1단계: 그린 스크린 촬영 계획

규모 결정_적합한 렌즈를 계산. 광각 장면을 만들 계획이라면 피사체를 올바른 스케일로 촬영하는게 더욱 요구된다. 이 프로세스는 주로 배경판이라고 하는 배경 요소를 촬영하는 데 사용되는 렌즈의 시야를 아는 데 의존. 동일한 초점 거리 렌즈로 전경과 배경을 모두 촬영하는 것이 중요. 또는 배경 판을 촬영하는 데 사용된 렌즈를 모르는 경우 최소한 추측할 수 있는 한 가깝게 촬영하는 것이 중요.

![green-screen-formula](https://user-images.githubusercontent.com/90597861/146695288-74375285-3d03-4d2f-85fb-976766f70fe5.jpg)

한 가지 주목할 가치는 배경 샷이 더 넓을수록 배우를 완전히 촬영하기 위해 더 큰 그린 스크린이 필요. 이 프로세스 는 렌즈 시야를 활용하여 모든 촬영에 필요한 최종 그린 스크린 크기를 계산.

2단계: 그린스크린 조명 

조명은 균일
조명은 부드럽고 확산
스크린은 피사체와 별도로 켜여함

녹색 화면 배경을 조명할 때 목표는 조명을 최대한 균일하게 만드는 것. 이렇게 하면 핫스팟이나 그림자 없이 녹색 색상이 고르게 유지되어 후반 작업의 크로마 키 프로세스에 도움. 또한 배우와 그린 스크린을 개별적으로 조명해야 하며, 가급적이면 배우와 그린 스크린 배경이 최소 6피트 떨어져 있어야 한다. 액터의 조명을 녹색 화면이 합성된 후 나타날 장면과 일치시키는 것도 중요! 조명은 항상 소프트하게. 

조명의 위치도 중요. 두 개의 조명만 사용하여 배경을 비추는 경우 녹색 화면의 양쪽에 조명을 하나씩 놓고 45도 각도로 몇 피트 뒤로 배치. 각 조명의 각도를 미세 조정/조정하여 중앙에서 너무 많이 겹치지 않도록 할 수 있다. 일관성을 위해 녹색 화면의 양쪽에 동일한 표시등을 사용하고 있는지 확인. 더 큰 프로덕션에서는 오버헤드 조명, 추가 조명 또는 더 많은 확산을 사용해야 할 수도 있지만 여기에 설명된 기본 원칙은 동일하다.

3단계: 깨끗한 크로마 키 얻기

항상 깨끗한 크로마 키 합성이 최종 목표다.

깨끗한 크로마 키는 배우나 피사체에 자연스러워 보이는 선명하고 정의된 가장자리를 남긴다. 그러나 종종 녹색 화면에서 디지털 아티팩트, 흔들리거나 들쭉날쭉한 가장자리 및 색상 스필이 나타날 수 있다. 스필은 가장 큰 문제 중 하나다. 스크린이 피사체에 반사되어 사후에 제거하기 어려운 녹색 후광이 생성될 때 발생.

깨끗한 그린스크린을 촬영키 위해선 하나는 그린 스크린 또는 블루 스크린을 사용해야 하는지 결정하는 것이다. 오늘날의 디지털 카메라에서는 녹색이 가장 깨끗한 키를 제공하지만 배우가 금발 머리나 녹색 옷을 입고 있다면 녹색이 밝은 색 머리카락에 쏟아질 수 있으므로 블루 스크린으로 더 나은 결과를 얻을 수 있다.

항상 모션블러가 안생기게 셔터는 빠르게 한다. 

이에 더해 높은 비트 뎁스를 사용하는 카메라가 유리하고 감도는 최대한 낮게 한다. 그린에도 노이즈가 묻어 깔끔하게 빠지지 않는다. 

*블루와 그린스크린 중 어떤것이 유리한걸까? 

크로마 키 합성에 블루 스크린과 그린 스크린을 사용하는 것의 차이점

블루 스크린을 사용하는 것과 그린 스크린을 사용하는 것 사이에 실제 차이가 있다. 
